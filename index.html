<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GestÃ£o de Gastos</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg:#0f0f10;--card:#1a1a1c;--text:#fff;--muted:#aaa;
  --primary:#fff;--primary-text:#000;
}
.light{
  --bg:#f3efff;--card:#fff;--text:#2b1d4f;--muted:#6b5ca5;
  --primary:#6c4cff;--primary-text:#fff;
}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI";background:var(--bg);color:var(--text);}
.app{max-width:420px;margin:auto;padding:20px;}
.card{background:var(--card);border-radius:20px;padding:20px;}
input,select,button{width:100%;padding:14px;margin-top:12px;border-radius:14px;border:1px solid #333;background:#111;color:var(--text);}
.light input,.light select{background:#fff;border-color:#ddd;}
.btn-main{background:var(--primary);color:var(--primary-text);border:none;}
#darkToggle{position:fixed;top:16px;right:16px;font-size:22px;cursor:pointer;}
#logoutBtn{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);padding:10px 28px;border-radius:999px;background:var(--primary);color:var(--primary-text);border:none;}
</style>
</head>

<body>

<div id="darkToggle">ðŸŒ™</div>

<div class="app">
<div class="card">

<h2>ðŸ’° GestÃ£o de Gastos</h2>

<div id="login">
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Palavra-passe">
  <button class="btn-main" id="loginBtn">Entrar / Criar conta</button>
</div>

<div id="app" style="display:none">

<select id="mesSelecionado"></select>

<select id="moeda">
  <option value="â‚¬">Euro (â‚¬)</option>
  <option value="R$">Real (R$)</option>
  <option value="$">DÃ³lar ($)</option>
  <option value="Â£">Libra (Â£)</option>
</select>

<select id="cat"></select>

<input id="desc" placeholder="DescriÃ§Ã£o">
<input id="val" type="number" placeholder="Valor">
<button class="btn-main" id="addBtn">Adicionar gasto</button>

<h3>Gastos do mÃªs</h3>
<div id="lista"></div>

<h3>Total: <span id="total">0.00</span></h3>
<div id="comparacao"></div>
<canvas id="grafico"></canvas>

</div>
</div>
</div>

<button id="logoutBtn" style="display:none">Sair</button>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyA53gz5pwnzSFx4alP2Gb6L7N3qAvXmMdU",
  authDomain:"controle-financeiro-fafd9.firebaseapp.com",
  projectId:"controle-financeiro-fafd9"
});
const auth=firebase.auth(), db=firebase.firestore();

const baseCats=["AlimentaÃ§Ã£o","Transporte","Renda","Lazer","Outros"];

function getCats(){
  return JSON.parse(localStorage.getItem("cats"))||baseCats;
}
function saveCats(c){localStorage.setItem("cats",JSON.stringify(c));}

function carregarCategorias(){
  const c=getCats();
  cat.innerHTML="";
  c.forEach(x=>cat.innerHTML+=`<option>${x}</option>`);
  cat.innerHTML+=`<option value="__add">âž• Adicionar categoria</option>`;
}

cat.onchange=()=>{
  if(cat.value==="__add"){
    const nome=prompt("Nome da nova categoria:");
    if(nome){
      const c=getCats();
      c.push(nome);
      saveCats(c);
      carregarCategorias();
      cat.value=nome;
    }else cat.selectedIndex=0;
  }
};

function removerCategoria(nome){
  if(baseCats.includes(nome)) return;
  if(confirm(`Queres apagar a categoria "${nome}"?`)){
    const c=getCats().filter(x=>x!==nome);
    saveCats(c);
    carregarCategorias();
  }
}

/* resto do cÃ³digo (login, gastos, grÃ¡fico, comparaÃ§Ã£o) permanece igual */
</script>

</body>
</html>
